# YAML のハイフン（`-`）の使い分け - 配列 vs オブジェクト

## 基本ルール

**ハイフン（`-`）が必要かどうかは、データ構造が配列かオブジェクトかで決まる**

## オブジェクト（マッピング）→ ハイフンなし

キーで名前を付けてアクセスする構造

```yaml
jobs:
  build:        # ← ハイフンなし（"build"という名前のジョブ）
    runs-on: ubuntu-latest
  test:         # ← ハイフンなし（"test"という名前のジョブ）
    runs-on: ubuntu-latest
```

- キー名（`build`, `test`）で識別
- `needs.build.result`のように名前でアクセス可能

## 配列（リスト）→ ハイフン必要

順序付きの項目の集まり

```yaml
jobs:
  build:
    steps:
      - name: Step 1    # ← ハイフン必要（1番目のステップ）
        run: echo "1"
      - name: Step 2    # ← ハイフン必要（2番目のステップ）
        run: echo "2"
```

- 順序で識別（1番目、2番目...）
- ステップ自体に名前はない
- `name`はステップの中のプロパティ

## 比較表

| 項目 | オブジェクト（`jobs`） | 配列（`steps`） |
|------|---------------------|----------------|
| ハイフン | **不要** | **必要** |
| 構造 | キー: 値 | 順序付きリスト |
| 識別方法 | 名前（キー） | 順序（インデックス） |
| アクセス例 | `needs.build.result` | `steps[0]`, `steps[1]` |

## 見分け方のパターン

### パターン1: キー名がある → ハイフンなし
```yaml
jobs:
  my-job-name:     # ← 自分で名前を付ける
    runs-on: ubuntu-latest
```

### パターン2: キー名がない → ハイフンあり
```yaml
steps:
  - name: Step 1   # ← "name"はステップ内のプロパティ
    run: echo "1"  # ← ステップ自体に名前はない
```

## その他の配列の例

### インライン配列記法
```yaml
needs: [build, test]
```

### 複数行配列記法
```yaml
needs:
  - build     # ← 配列なのでハイフン必要
  - test      # ← 配列なのでハイフン必要
```

### 環境変数（配列ではない）
```yaml
env:
  NODE_ENV: production    # ← ハイフンなし（オブジェクト）
  DEBUG: true
```

## まとめ

- **オブジェクト**: キーで名前を付ける → **ハイフン不要**
- **配列**: 順序で識別する → **ハイフン必要**
- GitHub Actionsでは`jobs`はオブジェクト、`steps`は配列
- 迷ったら「この項目に自分で名前を付けているか？」を考える
