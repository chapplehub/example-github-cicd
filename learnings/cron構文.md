# cron構文

## cronとは

Unix/Linux システムで使われる **定期実行のスケジューリング形式**。GitHub Actionsでは `schedule` トリガーで使用される。

## 基本構文

```
* * * * *
│ │ │ │ │
│ │ │ │ └─ 曜日 (0-7, 0と7は日曜日)
│ │ │ └─── 月 (1-12)
│ │ └───── 日 (1-31)
│ └─────── 時 (0-23)
└───────── 分 (0-59)
```

## よく使うパターン

| パターン | 実行タイミング |
|---------|--------------|
| `*/15 * * * *` | 15分ごと (0, 15, 30, 45分) |
| `0 * * * *` | 毎時0分（1時間ごと） |
| `0 9 * * *` | 毎日9時 |
| `0 0 * * 0` | 毎週日曜日の0時 |
| `0 0 1 * *` | 毎月1日の0時 |
| `0 9,17 * * *` | 毎日9時と17時 |

## `/`（スラッシュ）の意味と使い分け

### `/` = ステップ値（一定間隔での繰り返し）

**使う場合:**
```yaml
# 15分ごと（1時間に4回）
cron: "*/15 * * * *"  # 0, 15, 30, 45分

# 2時間ごと
cron: "0 */2 * * *"  # 0, 2, 4, 6, 8...時

# 10分ごと
cron: "*/10 * * * *"  # 0, 10, 20, 30, 40, 50分
```

**使わない場合:**
```yaml
# 毎時0分（1時間に1回）
cron: "0 * * * *"

# 毎日9時0分（1日に1回）
cron: "0 9 * * *"

# 特定の時刻（例: 9時と17時）
cron: "0 9,17 * * *"
```

### なぜ `0` は `/0` と書かないのか？

- `/0` は「0でステップ」という意味になり、**数学的に無意味**（ゼロ除算）
- `0` と書くことで「この値の時だけ実行」という意味になる

**ルール:**
- **特定の時刻に1回実行** → 数値を直接書く（例: `0`, `9`, `0,30`）
- **一定間隔で繰り返し実行** → `*/数値` を使う（例: `*/15`, `*/2`）

## GitHub Actionsでの注意点

### タイムゾーン
- cron は **UTC（協定世界時）** で動作
- 日本時間（JST）は UTC+9
- 例: 日本時間の9時に実行したい場合 → `0 0 * * *`（UTC 0時 = JST 9時）

### 実行間隔の推奨
- 最短実行間隔の推奨は5分程度
- あまり頻繁に実行すると GitHub Actions の利用制限に引っかかる可能性がある

### 使用例

```yaml
name: Schedule
on:
  schedule:
    - cron: "*/15 * * * *"  # 15分ごとに実行
jobs:
  run:
    runs-on: ubuntu-latest
    steps:
      - run: date
```

## よくあるエラー

### スペースがない
```yaml
# ❌ エラー
cron: "*/15****"

# ✅ 正しい
cron: "*/15 * * * *"
```

### YAMLの構文エラー
```yaml
# ❌ エラー（スペースがない）
steps:
  -run: date

# ✅ 正しい
steps:
  - run: date
```
